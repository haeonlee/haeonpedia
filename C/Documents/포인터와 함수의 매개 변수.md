작성일: 2022. 08. 06

책 <혼자 공부하는 C언어>에서 17장 도전 실전 예제를 풀다가 '배열을 함수의 매개변수로 쓸 때 왜 포인터로 줘야 하는지' 궁금했다.

---

참고 자료
- 배열을 함수의 매개 변수로 사용할 때 주의할 점, 김성엽 님의 네이버 블로그 <프로그래머 김성엽>(https://m.blog.naver.com/tipsware/220993190781)

---

# 1. 일반 변수를 함수의 매개 변수로 사용하는 경우

### 변수의 값만 넘기는 경우
단순히 현재 변수가 가지고 있는 값을 다른 함수로 전달하기 위해 사용한다. 이럴 땐 굳이 포인터를 쓸 필요가 없다.

### 변수의 주소를 넘기는 경우(포인터 사용)
해당 함수에서 이 변수의 값도 사용은 하지만, 변수의 값을 변경해야 할 때 사용한다.

# 2. 배열로 선언된 변수를 매개 변수로 사용하는 경우

배열로 선언된 변수는 그룹 지어진 메모리기 때문에 잘못 사용하면 메모리의 낭비나 실행 속도의 저하 같은 현상이 발생할 수 있다.

따라서 배열에 저장된 값을 다른 함수로 저장하는 경우는

(1) 메모리 관리적인 측면: data 변수의 값을 다른 함수로 전달하려면 해당 함수에도 그만큼의 메모리가 필요하므로, 메모리에 부담이 된다.
(2) 프로그램 실행 속도 측면: 메모리를 복사하기 위한 시간이 필요하므로 배열의 크기가 크다면, 그만큼 실행 속도도 느려진다.
(3) 데이터 관리 측면: 동일한 데이터를 가진 메모리가 늘어난다는 뜻이기 때문에 '데이터의 중복'을 초래한다.

# 3. 배열을 다른 함수로 전달할 때는 주소 전달만 가능

위와 같은 이유로 C언어는 함수를 호출할 때 배열에 저장된 값을 전달하는 기능은 제공하지 않고, 배열의 주소를 전달하도록 구현되었다.

### 배열의 이름만 적어도 주소 값만 전달이 된다

``` c
#include <stdio.h>

void Test(int temp[1000])
{
    printf("Array temp size : %d\n", sizeof(temp));
}

void main()
{
    int data[1000];
    printf("Array data size : %d\n", sizeof(temp));
    Test(data);
}
```

실행 결과는
``` c
Array data size : 4000
Array temp size : 4
```

즉, Test 함수의 temp는 컴파일러가 포인터로 번역했다는 말이다.